
///////////////////////////////////////////////////////////////////////////////////////////////

void runToZero() {
  axis1.setSpeed(-motorSpeed);
  while (digitalRead(SENSORPIN1)) {
    axis1.runSpeed();
  }
  axis1.setCurrentPosition(0);
}

void setNewSpeed(int newSpeed) {
  motorSpeed = newSpeed;
  axis1.setMaxSpeed(motorSpeed);
}

///////////////////////////////////////////////////////////////////////////////////////////////

void calibrate() {
  Serial.println("Starting calibration");
  axis1.setSpeed(-motorSpeed);
  statusByte = 0;
  Serial.println(statusByte);
  sendStatus();
}

///////////////////////////////////////////////////////////////////////////////////////////////

boolean targetReached() {
  return (axis1.distanceToGo() == 0);
}

///////////////////////////////////////////////////////////////////////////////////////////////

void resetMotorData() {
  axis1.setSpeed(motorSpeed);
  axis1.setAcceleration(normalAccel);
}

///////////////////////////////////////////////////////////////////////////////////////////////

void updateTarget(float inTarget) {
  int inTgt = (int)(inTarget * maxDist);
  axis1.moveTo(inTgt);
  
  Serial.println("New Target in steps: " + String(inTgt));
}

///////////////////////////////////////////////////////////////////////////////////////////////


